---
layout: default
---
<header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">{{ page.title | escape }}</h1>
  </header>
<div class="search-bar">
<label for="searchfield">Search</label>
<form id="searchform" onsubmit="return false">
<input placeholder="Search field trips" type="text" id="searchfield" name="search" value size="30" maxlength="128">
<input type="submit" class="invisible">
		</form>
  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
  <label for="edit-start">Time Period</label>
  <select id="year-select" onchange="timeFilterEvents()">
  <option value="*">---</option>
  <option value="upcoming" selected>Upcoming</option>
  {% assign currentyear = 0 %}
  {% for fieldtrip in site.field_trips %}
  {% assign fieldtripyear = fieldtrip.date | date: "%Y" %}
  {% if currentyear!=fieldtripyear %}
  {% assign currentyear = fieldtripyear %}
  <option value="{{ currentyear }}">{{ currentyear }}</option>
  {% endif %}
{% endfor %}
  </select>
  <p class="searchcount"></p>
</div>
<br>
<div id="upcoming-events">
{% for fieldtrip in site.field_trips %}
 {% assign currentdateunix = 'now' | date: "%s" %}
  {% assign postdateunix = fieldtrip.date | date: "%s" %}
  {% assign postdate = fieldtrip.date | date: "%a<br><div class='centre-date'>%b %d</div>%Y" %}
    {% if postdateunix >= currentdateunix %}
		<div class="circle-date">{{ postdate }}</div>
		<div class="event-content">
	      <h2><a href="{{ fieldtrip.url }}">{{ fieldtrip.title }}</a></h2>
	  <h3>Leader: {{ fieldtrip.leader }}</h3>
	  <p>{{ fieldtrip.content | strip_html | truncatewords: 20 }}</p>
	  </div>
	  <hr>
    {% endif %}
{% endfor %}
</div>

<div id="filtered-events" style="display:none">
Filtered Events
</div>
   
<script>
window.store = [
	{% for fieldtrip in site.field_trips %} {
		"title": {{fieldtrip.title | jsonify}},
		"leader": {{fieldtrip.leader | jsonify}},
		"date": {{ fieldtrip.date | date: '%b %d' | jsonify }},
		"dayofweek": {{ fieldtrip.date | date: '%a' | jsonify }},
		"year": {{ fieldtrip.date | date: '%Y' | jsonify }},
		"excerpt": {{ fieldtrip.content | strip_html | truncatewords: 20 | jsonify }},
		"url": "{{ fieldtrip.url }}"
	}
	{% unless forloop.last %}, {% endunless %}
	{% endfor %}
]
</script>
<script type="text/javascript" src="/assets/search-field-trips.js"></script>